# サバイバルクラフトシステム設計書

## 1. 基本コンセプト

物理/科学エンジンを最大限に活用し、リアルな資源管理とクラフトの楽しさを両立させるサバイバルゲーム。
フィールド探索では即座のサバイバルに焦点を当て、拠点では深いクラフトシステムを楽しめる二層構造。

---

## 2. 物理/科学エンジン活用の柱

### 2.1 温度システム
- **体温管理**: 低温環境での凍傷、高温環境での熱中症リスク
- **火の物理**: 燃焼に酸素・可燃物・着火源が必要。風向きで延焼方向が変わる
- **料理と加工**: 食材の温度で調理状態が変化（生→加熱→焦げ→炭化）
- **金属加工**: 鉱石を融点以上に加熱して精錬、形成

### 2.2 化学反応システム
- **素材の組み合わせ**: 特定の素材を混ぜると化学反応が発生
  - 例: 硫黄 + 木炭 + 硝石 → 火薬
  - 例: 植物油 + 灰 → 石鹸
- **酸化・腐敗**: 時間経過で素材が変質（鉄→錆、肉→腐敗）
- **pH管理**: 酸性・アルカリ性の概念で薬品や染料を作成

### 2.3 物理法則
- **重量と持ち運び**: 重い物は移動速度が低下、体力消費増加
- **重心と安定性**: 構造物の建築時に重心を考慮しないと崩壊
- **水圧・気圧**: 深海や高地での環境変化
- **電気伝導**: 金属は電気を通す、水に濡れると感電リスク

### 2.4 エネルギー保存則
- **体力とカロリー**: 摂取カロリー < 消費カロリー = 衰弱
- **道具の耐久度**: 使用するほど摩耗し、最終的に破損
- **エネルギー変換**: 燃料 → 熱 → 運動 の変換効率

---

## 3. 資源管理システム

### 3.1 消費型資源
**目的**: プレイヤーに常に選択を迫り、やりくりの楽しさを提供

#### 生命維持資源
- **水分**: 最優先。湧き水、雨水収集、雪解け水
  - 汚染水は煮沸または濾過が必要
- **食料**: カロリーと栄養バランス
  - 炭水化物（即効性エネルギー）
  - タンパク質（体力回復）
  - ビタミン（病気予防）
- **体温**: 服装、火、シェルター
- **酸素**: 通常は無限だが、水中、毒ガス地域、高地で制限

#### 製作資源
- **燃料**:
  - 木材（低効率、豊富）
  - 石炭（中効率）
  - 石油製品（高効率、レア）
- **建材**:
  - 木材（軽量、加工容易、耐久性低）
  - 石材（重量大、耐久性高、加工困難）
  - 金属（加工に高温必要、高性能）
- **消耗品**:
  - 薬品（応急処置、病気治療）
  - 弾薬（遠距離攻撃）
  - バッテリー（電子機器）

### 3.2 再生可能資源
**目的**: 長期サバイバルの持続可能性

- **植物**: 採取後、一定時間で再生。季節により成長速度変化
- **動物**: 狩猟し過ぎると個体数減少、適度なら維持される
- **雨水**: 天候により定期的に供給
- **太陽光**: 日中は無限の光源・エネルギー源

### 3.3 マップ固有資源
**目的**: 探索の動機付けと難易度調整

- **森林マップ**: 木材豊富、水源あり（難易度: 低）
- **砂漠マップ**: 水希少、昼夜の温度差激しい（難易度: 高）
- **雪山マップ**: 低温との戦い、視界不良（難易度: 中～高）
- **廃墟マップ**: 加工済み素材豊富だが汚染リスク（難易度: 中）
- **火山マップ**: 高温、有毒ガス、鉱物資源豊富（難易度: 高）

---

## 4. フィールドクラフト（サバイバル重視）

### 4.1 即座の生存対応
**特徴**: 簡易的、限られた道具、物理法則を利用

#### 火起こし
- **摩擦式**: 木の棒を回転させて着火（時間かかる、天候に左右される）
- **火打石**: 火花を散らして着火（早いが道具必要）
- **レンズ集光**: 太陽光を集める（晴天時のみ）

#### 緊急シェルター
- **葉っぱの山**: 即席、保温効果低
- **枝組みシェルター**: 1時間で作成、雨風しのげる
- **雪洞**: 雪山専用、保温効果高

#### 即席道具
- **石斧**: 石 + 枝 + 蔓（木の伐採）
- **槍**: 長い枝 + ナイフで先端削る（狩猟、防衛）
- **松明**: 枝 + 布/樹脂（光源、2-3時間で燃え尽きる）

#### 応急処置
- **包帯**: 布を裂いて止血
- **添え木**: 骨折時に枝で固定
- **薬草湿布**: 特定植物を潰して傷口に塗布（感染予防）

### 4.2 フィールド加工
- **肉の燻製**: 長期保存のため煙で燻す
- **水の煮沸**: 病原菌除去
- **簡易罠**: 小動物捕獲用

### 4.3 物理パズル要素
- **川を渡る**: 丸太を倒して橋を作る（重心計算）
- **崖を登る**: 杭を打って足場を作る
- **洞窟探索**: 松明で酸素欠乏を防ぎつつ進む

---

## 5. 拠点クラフト（深い製作システム）

### 5.1 拠点の役割
- **安全地帯**: 敵が侵入できない、回復できる
- **作業場**: 複雑なクラフトに必要な設備を設置
- **倉庫**: 大量の素材を保管

### 5.2 製作設備
各設備は建築し、アップグレード可能

#### 初級設備
- **焚き火**: 料理、暖、照明
- **作業台**: 木工製品の製作
- **乾燥棚**: 肉や魚の保存

#### 中級設備
- **炉**: 金属精錬、陶器焼成（温度管理必要）
- **鍛冶台**: 金属加工、武器・防具製作
- **錬金台**: 化学反応を利用した薬品・火薬製作
- **織機**: 布地の製作

#### 上級設備
- **発電機**: 電力供給（燃料または風力・水力）
- **電気炉**: 高温精錬、特殊合金製作
- **化学実験台**: 高度な化合物製作
- **工作機械**: 精密部品の加工

### 5.3 複雑なレシピ例

#### 鋼鉄の剣（多段階プロセス）
1. **鉄鉱石採掘** (フィールド) → つるはし必要
2. **木炭製作** (拠点) → 木材を炭焼き窯で蒸し焼き
3. **鉄精錬** (拠点・炉) → 鉄鉱石 + 木炭 + 高温
4. **炭素添加** (拠点・炉) → 鉄 + 木炭 → 鋼鉄
5. **鍛造** (拠点・鍛冶台) → 鋼鉄を加熱→叩く→冷却を繰り返す
6. **研磨** (拠点・砥石) → 刃を鋭利に

#### 抗生物質（化学反応）
1. **カビ採取** (フィールド) → 腐った木や洞窟
2. **培養** (拠点・培養器) → カビ + 糖分 + 適温
3. **抽出** (拠点・錬金台) → アルコールで有効成分抽出
4. **精製** (拠点・蒸留器) → 不純物除去
5. **製剤化** → 錠剤またはシロップに加工

### 5.4 自動化要素
**目的**: 後期の作業効率化、エンジニアリングの楽しさ

- **水車**: 川の流れで動力発生 → 製粉、のこぎりなど
- **風車**: 風で動力発生（天候依存）
- **コンベア**: アイテムの自動搬送（電力必要）
- **自動炉**: 燃料とアイテムを入れれば自動精錬

---

## 6. 難易度調整システム

### 6.1 マップ別パラメータ
各マップで以下のパラメータを調整：

| パラメータ | 森林 | 砂漠 | 雪山 | 廃墟 | 火山 |
|---------|------|------|------|------|------|
| 水入手 | ★★★★ | ★ | ★★ | ★★ | ★ |
| 食料入手 | ★★★★ | ★★ | ★★ | ★ | ★ |
| 建材入手 | ★★★★★ | ★★ | ★★★ | ★★★★ | ★★ |
| 温度管理 | ★ | ★★★★ | ★★★★★ | ★★ | ★★★★★ |
| 敵脅威度 | ★★ | ★★★ | ★★★ | ★★★★ | ★★★★ |
| レア資源 | ★★ | ★★★ | ★★★ | ★★★★ | ★★★★★ |

### 6.2 難易度モード
プレイヤーが選択可能：

- **ストーリーモード**: 資源豊富、体力消費遅い（物語重視）
- **ノーマル**: バランス型（初心者向け）
- **ハードコア**: 資源希少、一度死んだらセーブデータ削除
- **カスタム**: 各パラメータを個別調整可能

### 6.3 動的難易度調整
- **時間経過**: 日数が経つほど資源が枯渇しやすく、敵が強化
- **プレイヤースキル分析**: 死亡回数が多いと資源出現率上昇
- **季節変化**: 冬は食料減少、夏は水消費増加

---

## 7. 物理エンジン活用の具体例

### 7.1 燃焼シミュレーション
```
燃焼条件チェック:
- 可燃物 (木材、布、油など)
- 着火温度到達
- 酸素供給

延焼ロジック:
- 風向き・風速で炎の広がり方が変化
- 水や砂で消火可能
- 煙は上昇し、密閉空間では窒息リスク
```

### 7.2 構造物の安定性
```
建築時計算:
- 各部材の重量
- 支持点の配置
- 重心位置

判定:
- 重心が支持基底面内 → 安定
- 重心が支持基底面外 → 崩壊
```

### 7.3 温度伝導
```
熱源から距離に応じて温度減衰:
- 火の隣: +20°C
- 1m離れ: +10°C
- 2m離れ: +5°C

素材による熱伝導率:
- 金属: 高 (すぐ熱くなる、冷めやすい)
- 木材: 中
- 布: 低 (断熱効果)
```

### 7.4 化学反応の連鎖
```
例: 火薬の爆発
火薬 + 着火
  → 急激な燃焼
  → ガス膨張
  → 衝撃波発生
  → 周囲の構造物破壊
```

---

## 8. ゲームループとの統合

### 8.1 探索フェーズ (フィールド)
1. マップに降り立つ（ランダムまたは選択）
2. 即座にサバイバル開始（水・食料・体温管理）
3. 簡易クラフトで道具作成
4. 資源収集と探索
5. 危険（敵、環境）を避けつつ貴重な素材を入手
6. 所持限界に達したら拠点に帰還

### 8.2 拠点フェーズ
1. 持ち帰った素材を倉庫に保管
2. 設備を使って高度な製作
3. 装備を強化
4. 拠点を拡張・アップグレード
5. 次の探索の準備
6. 再び探索へ

### 8.3 進行のマイルストーン
- **序盤**: 基本的なサバイバル、石器時代レベルの道具
- **中盤**: 金属器、農耕、定住生活
- **後期**: 電気、化学、自動化、高度な探索

---

## 9. プレイヤーのモチベーション維持

### 9.1 短期目標
- 今日の水と食料を確保
- 夜を乗り切るためのシェルター
- 次のマップ探索のための装備

### 9.2 中期目標
- 特定の設備を建築
- レアな素材を入手
- 強力な武器・防具の製作

### 9.3 長期目標
- 全マップ制覇
- 最高級の装備コンプリート
- 完全自動化された拠点

### 9.4 発見の喜び
- 新しい素材の組み合わせで思わぬアイテムが完成
- 物理法則を利用したトリッキーな解決法
- 隠されたレシピの発見

---

## 10. 実装上の考慮事項

### 10.1 パフォーマンス
- 物理演算は必要な範囲に限定（プレイヤー周辺のみ詳細計算）
- 複雑な化学反応は事前定義されたレシピベース
- 遠方の資源は簡易シミュレーション

### 10.2 バランス調整
- α/βテストで各資源の出現率を調整
- クラフト時間が長すぎないよう配慮（待ち時間の退屈さを避ける）
- ただし簡単すぎても達成感が薄れるため、適度な難易度を維持

### 10.3 チュートリアル
- 最初のマップは森林（簡単）で基本を学ぶ
- 段階的に物理法則や化学反応を紹介
- 失敗から学べるよう、即死を避けるバッファ

### 10.4 拡張性
- MOD対応: プレイヤーが新しいレシピや資源を追加可能
- マップエディタ: コミュニティが独自のマップを作成
- シーズンイベント: 期間限定の特殊資源や課題

---

## 11. まとめ

このサバイバルクラフトシステムは、物理/科学エンジンの特性を最大限活かし、以下を実現します：

✅ **リアリティ**: 温度、化学反応、重力などの物理法則に基づく世界
✅ **資源管理の緊張感**: 常に消費される資源をやりくりする楽しさ
✅ **二層のクラフト**: フィールドでは即席サバイバル、拠点では深い製作システム
✅ **難易度の柔軟性**: マップとモード選択で幅広いプレイヤーに対応
✅ **長期的なやり込み**: 自動化や最適化による継続的な改善の余地

プレイヤーは科学者兼エンジニアとなり、知恵と工夫で過酷な環境を生き抜く体験を得られます。
